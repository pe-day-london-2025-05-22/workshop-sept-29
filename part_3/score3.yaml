apiVersion: score.dev/v1b1
metadata:
  name: todos
containers:
  main:
    image: ghcr.io/astromechza/dynamo-db-todos:v1.5.1
    variables:
      MOTD: "Hello $${context.org_id} $${context.project_id} $${context.env_id}"
      AWS_REGION: ${resources.todos-table.region}
      AWS_DYNAMODB_TABLE: ${resources.todos-table.name}
      AWS_BEDROCK_MODEL_NAME: ${resources.model.name}
service:
  ports:
    web:
      port: 80
      targetPort: 8080
resources:
  dns:
    type: dns
  route:
    type: route
    params:
      hostname: ${resources.dns.hostname}
      port: 80
  todos-table:
    type: dynamodb-table
    params:
      hash_key: Id
      range_key: CreatedAtEpoch
      range_key_type: N
  model:
    type: bedrock-model

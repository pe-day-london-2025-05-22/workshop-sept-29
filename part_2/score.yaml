apiVersion: score.dev/v1b1
metadata:
  name: simple
  annotations:
    humanitec.dev/resType: score-workload
containers:
  main:
    image: nginx:latest
    files:
      /etc/nginx/conf.d/default.conf:
        content: |
          server {
              listen       80;
              listen  [::]:80;
              server_name  ${resources.dns.hostname};
              error_log stderr error;
              access_log  /dev/stdout;
              location / {
                  root   /usr/share/nginx/html;
                  index  index.html index.htm;
              }
          }
      /usr/share/nginx/html/index.html:
        content: |
          <!DOCTYPE html>
          <html lang="en">
          <head>
              <meta charset="UTF-8">
              <title>Hello Score</title>
          </head>
          <body>
              <h1>Hello Score!</h1>
          </body>
          </html>
service:
  ports:
    web:
      port: 80
      targetPort: 80
resources:
  dns:
    type: dns
  route:
    type: route
    class: host-only
    params:
      hostname: ${resources.dns.hostname}
      port: 80
